<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>K6 GUIDE | Crimson Minimal Luxury</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
:root{
--crimson:#8B0000;
--deep:#5A0000;
--cream:#F8F4EF;
--soft:#EFE8E1;
--gold:#C6A75E;
--text:#111;
}

body{
font-family:'Noto Sans Thai',sans-serif;
background:var(--cream);
color:var(--text);
padding-top:90px;
}

section{padding:120px 0;}

.full-cream{background:var(--cream);}
.full-white{background:#fff;}

.section-title{
font-size:32px;
font-weight:700;
letter-spacing:2px;
text-transform:uppercase;
margin-bottom:60px;
}
.section-title:after{
content:"";
width:60px;height:2px;
background:var(--gold);
display:block;margin-top:15px;
}

/* NAVBAR */
.navbar{
background:#fff;
border-bottom:1px solid var(--soft);
box-shadow:0 4px 20px rgba(0,0,0,0.05);
}
.navbar-brand{
font-weight:700;
letter-spacing:2px;
color:var(--crimson)!important;
}
.nav-link{color:var(--text)!important;margin-left:20px;position:relative;}
.nav-link:after{
content:"";position:absolute;bottom:-5px;left:0;
width:0%;height:2px;background:var(--crimson);
transition:0.3s;
}
.nav-link:hover:after{width:100%;}

/* HERO */
.carousel-item img{
height:85vh;
object-fit:cover;
filter:brightness(85%);
}
.carousel-caption{
text-align:left;
bottom:30%;
}
.carousel-caption h1{
font-size:48px;font-weight:700;letter-spacing:3px;
}

/* CARD */
.card{
border:none;border-radius:0;background:#fff;
transition:0.4s;
}
.card img{
height:260px;object-fit:cover;
}
.card-body{padding:25px;}
.card:hover{transform:translateY(-8px);}

.category-tag{
display:inline-block;font-size:11px;
letter-spacing:1px;padding:4px 10px;
border:1px solid var(--gold);
color:var(--crimson);
margin-bottom:10px;text-transform:uppercase;
}

/* RATING */
.rating-display i{color:var(--gold);font-size:14px;}
.rating-score{font-size:13px;margin-left:6px;color:#777;}

.star-input i{
font-size:22px;
color:#ddd;
cursor:pointer;
transition:0.2s;
}
.star-input i.hovered,
.star-input i.selected{
color:var(--gold);
}

/* SEARCH */
.search-card{
background:#fff;border:1px solid var(--soft);
padding:40px;
}
.btn-search{
background:var(--crimson);
color:#fff;border:none;
transition:0.3s;
}
.btn-search:hover{
background:var(--gold);
color:#111;
}

/* FADE */
.fade-in{
opacity:0;transform:translateY(40px);
transition:all 0.8s ease;
}
.fade-in.appear{
opacity:1;transform:translateY(0);
}

/* FOOTER */
footer{
background:var(--deep);
color:#ddd;padding:80px 0 30px;
}
footer h5{color:#fff;letter-spacing:1px;}
footer a{color:#ddd;}
footer a:hover{color:var(--gold)!important;}

@media(max-width:768px){
.carousel-caption h1{font-size:32px;}
.card img{height:200px;}
}
</style>
</head>

<body>

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-light fixed-top">
<div class="container">
<a class="navbar-brand" href="#">K6 GUIDE</a>
</div>
</nav>

<!-- HERO -->
<div id="hero" class="carousel slide" data-ride="carousel">
<div class="carousel-inner">
<div class="carousel-item active">
<img src="K6 GUIDE_pages-to-jpg-0001.jpg" class="d-block w-100">
<div class="carousel-caption">
<h1>DISCOVER CRIMSON TASTE</h1>
<p>Luxury Restaurant Guide คลอง 6</p>
</div>
</div>
</div>
</div>

<!-- SEARCH -->
<section class="full-cream">
<div class="container">
<div class="search-card">
<div class="row">
<div class="col-md-9 mb-2">
<input class="form-control form-control-lg" placeholder="ค้นหาร้าน...">
</div>
<div class="col-md-3 mb-2">
<button class="btn btn-search btn-lg btn-block">Search</button>
</div>
</div>
</div>
</div>
</section>

<!-- RECOMMENDED -->
<section class="full-white">
<div class="container">
<h2 class="section-title">Recommended</h2>

<div class="row">

<div class="col-md-4 mb-4">
<div class="card fade-in">
<img src="ของหวาน/3.คาเฟ่/redlip.jpg" class="img-fluid">
<div class="card-body">
<span class="category-tag">Cafe</span>
<h5>RED LIPS Cafe</h5>

<div class="rating-display" id="rating-redlips"></div>

<div class="star-input mt-2" data-id="redlips">
<i class="far fa-star" data-value="1"></i>
<i class="far fa-star" data-value="2"></i>
<i class="far fa-star" data-value="3"></i>
<i class="far fa-star" data-value="4"></i>
<i class="far fa-star" data-value="5"></i>
</div>

<p class="mt-3">คาเฟ่บรรยากาศหรู เรียบง่าย ถ่ายรูปสวย</p>
</div>
</div>
</div>

</div>
</div>
</section>

<footer>
<div class="container text-center">
<h5>K6 GUIDE</h5>
<p>Minimal Luxury Crimson Edition</p>
<p>© 2026</p>
</div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, doc, getDoc, runTransaction } 
from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
apiKey: "AIzaSyAruIfPAa_g0rD6iJsYbOC4HSjRpjkDJ5s",
authDomain: "programgroup-804c9.firebaseapp.com",
projectId: "programgroup-804c9"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

/* LOAD RATING */
async function loadRating(id){
const ref = doc(db,"restaurants",id);
const snap = await getDoc(ref);

if(snap.exists()){
const data = snap.data();
const rating = data.rating || 0;
const count = data.ratingCount || 0;

document.getElementById("rating-"+id).innerHTML =
renderStars(rating) +
`<span class="rating-score">${rating.toFixed(1)} (${count})</span>`;
}
}

/* RENDER STARS */
function renderStars(r){
let full=Math.floor(r);
let half=r%1>=0.5;
let empty=5-full-(half?1:0);
let html="";
for(let i=0;i<full;i++) html+='<i class="fas fa-star"></i>';
if(half) html+='<i class="fas fa-star-half-alt"></i>';
for(let i=0;i<empty;i++) html+='<i class="far fa-star"></i>';
return html;
}

/* SUBMIT RATING */
async function submitRating(id,value){
const ref = doc(db,"restaurants",id);
await runTransaction(db,async(t)=>{
const snap=await t.get(ref);
if(!snap.exists()) return;
const d=snap.data();
let newCount=(d.ratingCount||0)+1;
let newAvg=((d.rating||0)*(d.ratingCount||0)+value)/newCount;
t.update(ref,{rating:newAvg,ratingCount:newCount});
});
loadRating(id);
}

loadRating("redlips");

</script>

</body>
</html>
